# Python Vector SDK - Getting Started
Created by Shawn Blakesley Last updated Apr 17, 2019

## Setting Up Vector

Make sure your robot has an ip established by placing him on the charger, double clicking his backpack, and raising then lowering his lift.

Make sure you have the victor repository on your computer (https://github.com/anki/victor).

## Setting Up the SDK
Make sure you have Python 3.6.1 or higher installed.

Make sure you have connected to the robot with chewie and completed onboarding.

To get started, follow the steps under Getting Started here:  in the victor repo, navigate to tools/sdk/vector-python-sdk-private, and go through the README's "Getting Started" steps (https://github.com/anki/vector-python-sdk-private/blob/bc04313411e1dd3d9a17e8b01bed544d8d1eb378/README.md), including these steps:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private
# install python dependencies
python3 -m pip install -r requirements.txt
# update the repo's submodules
git submodule update --init --recursive
```

To build the python protobuf dependencies, run:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private
#install go
brew install go
 
#choose one of the following commands based on your development needs; choose the first one if uncertain
python3 ./update.py # will use the last deployed proto from vector-python-sdk-private/victor-proto
python3 ./update.py -d ../../protobuf/gateway # will use the most recent proto from victor/tools/sdk/protobuf/gateway (use for dev-only)
python3 ./update.py -s -d ../../protobuf/gateway # will use the most recent proto from victor/tools/sdk/protobuf/gateway including the app-only code (use for dev-only)
```

Any time the proto files change you will need to run update again to keep the sdk in sync.

After that, install the python code found under tools/sdk/vector-python-sdk-private in the victor repo:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private/sdk
python3 -m pip install -e .
 
# If you're testing the 3dviewer, you'll want to run
python3 -m pip install -e .[3dviewer]
 
# If you're developing for the SDK, you'll want to run
python3 -m pip install -e .[3dviewer,docs,test]
 
# If you encounter a problem, this may help:
pip install --upgrade setuptools
```

If you see an error like `AssertionError: Egg-link ./tools/sdk/vector-sdk does not match installed location of anki-vector (at ./tools/sdk/vector-python-sdk-private/sdk)`, you may have an old sdk package installed in a different location. Poke around your python install directory (e.g., /usr/local/lib/python3.6/site-packages/) for a directory anki-vector.egg-link and remove it.

Next, navigate to the directory listed below and run one of the following configure scripts:


```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private
# For dev robot builds with dev account
python3 configure_dev.py
 
# For prod robot builds with prod account
python3 -m anki_vector.configure
 
# For webots from tools/sdk/scripts (should happen automatically when building for mac):
cd victor/tools/sdk/scripts
./mac_setup.sh
```

You will be prompted to enter your username, password, and a few other details specific to your robot. It must be the same login information that was used to log in to the robot.

Congrats, the SDK is all set up.

## Running Examples
Vector Python SDK tutorials are available in tools/sdk/vector-python-sdk-private/sdk/examples/tutorials and can be run as follows:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private/sdk/examples/tutorials
# on the robot. Replace {your_serial_number} with your esn (e.g., 00e20142)
./01_hello_world.py  --serial {your_serial_number}
# or for webots
./01_hello_world.py --serial Local
```

Also, most of the current SDK functionality has associated tests under tools/sdk/vector-sdk-tests, and they can be run like:

```
$VICTOR_ROOT/tools/sdk/vector-sdk-tests
# on the robot
./test_say_text.py
# or for webots
./test_say_text.py --serial Local
```

If you're unable to connect to the robot, make sure that your robot has gone through app onboarding. If it still isn't working, ping the SDK team at #vic-coz-sdk.


## Generating Documentation
A good place to start for understanding the SDK is our documentation. The SDK team is constantly working to make the documentation more flushed out and simultaneously user friendly. Please let the team know if anything causes even the slightest bit of confusion because our demographic is people of all walks of life, so I guarantee you won't be the only one confused.

The documentation can be generated by navigating to the tools/sdk/vector-python-sdk-private/sdk/docs folder in the victor repo, and running:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private/sdk/docs
make html
open build/html/index.html
```

Currently, the best place to start is the API reference because the rest of the copy is extremely temporary.

Make sure that you have properly configured your robot and the SDK before generating the docs

## Advanced Tips
You may set up the environment variables to run the SDK more easily:

```
export ANKI_ROBOT_SERIAL=<your_secret_robot_serial>
```

To just update the IP address if you are on a different network:

```
$VICTOR_ROOT/tools/sdk/vector-python-sdk-private
python3 ./configure_dev.py -u [NEW IP ADDRESS] -s <your_robot_serial_number>
```

## How to Use Unreleased Python SDK on Windows

1. (This may not be necessary but just in case) Install actually released SDK on Windows and go through setup process including the anki_vector.configure step, checking that 01_hello_world.py tutorial works: https://developer.anki.com/vector/docs/install-windows.html

2. Uninstall the released anki_vector package:
```
py -3 -m pip uninstall anki_vector
```

3. In the victor repo on Mac, go through all the steps from the top through the `python3 ./update.py` step: https://ankiinc.atlassian.net/wiki/spaces/VD/pages/441319496/Python+Vector+SDK+-+Getting+Started
4. Zip up this folder on Mac in your victor repo after successfully completing the previous step:
tools/sdk/vector-python-sdk-private
5. Bring your zip file from previous step to your Windows machine and unzip
6. After unzipping on Windows, cd into vector-python-sdk-private/sdk
7. Run:

```
py -3 -m pip install -e .
```

Check that at the end it says: "Successfully installed anki-vector" for version 0.5.2.dev0
8. Then cd into the examples/ dir beneath SDK and run your desired scripts.